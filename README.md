# CryptoEv

## Подготовка
Установка пакетов
```
pip install numpy
pip install mpi4py (для MPI)
```
Распаковать и собрать SAT-solver'ы.
```
./untar_ling.sh
./untar_rokk.sh
```
P.S. Скрипты запускать из корневой директории проекта!

## Запуск
```
python2.7 main.py [-cp tag/path] [-v 0] [-d str] [-b file]
```

## MPI Запуск
```
mpiexec -n node_count python2.7 mpi_main.py [-cp tag/path] [-v 0] [-d str] [-b file]
```
* node_count – число узлов, выделенных для рассчета

Дополнительные аргументы:
* -cp tag/path – тег или путь к файлу конфигурации (по умолчанию base)
* -v 0 - [0-3] подробность логов отладки (verbosity)
* -d str – описание для текущего запуска (по умолчанию отсутствует)
* -b path – путь к файлу с множеством переменных бекдора, с которого алгоритм начнет поиск (по умолчанию переменные секретного ключа)

## Конфигурация
### Параметры алгоритма (algorithm)
* **type** – используемый алгоритм для минимизации оценочной функции
  - *ev* – Эволюционный алгоритм
  - *ts* – Поиск с запретами
* **strategy** – стратегия для эволюционного алгоритма
  - *comma* – (mu, lambda)
  - *plus* – (mu + lambda)
  - *genetic* – генетический алгоритм (m, l, c)
* **mutation_function** – функция мутации
  - *uniform* – равномерная мутация
* **crossover_function** – функция кросинговера
  - *one-point* – одноточечный кросинговер
  - *two-point* – двухточечный кросинговер
  - *uniform* – равномерный кросинговер
* **stagnation_limit** – число стагнаций до рестарта
* **comparator** – способ сравнения декомпозиционных множеств
  - *max_min* – минимальное по значению, наибольшее по числу переменных
* **stop_condition** – условие остановки
  - *iterable* – по числу итераций
  - *mf_calls* – по числу вызовов оценочной функции
  - *locals* – по числу найденых минимумов с установленным числом стагнаций
  - *mf_value* – при достижении требуемого значения

### Параметры оценочной функции (predictive_function)
* **type** – используемая оценочная функция
  - *gad* – Guess-and-Determine
  - *ibs* – Inverse Backdoor Sets
* **key_generator** – криптографический алгоритм
  - *a5_1* – A5/1
  - *bivium* – Bivium
  - *trivium_64* – Trivium 64
  - *trivium_96* – Trivium 96
  - *e0* – E0
* **selection** – инструмент для определения объема выборки
  - *const* – постоянная выборка
  - *function* – изменяющаяся посредством выбранной функции
* **corrector** – корректировка временного ограничения (только для IBS)
  - *none* – без корректировки
  - *mass* – по принципу центра масс
  - *max* – выбор максимального

### Параметры SAT-solver'ов (solvers)
* **type** – используемый контейнер для SAT-solver
  - *net* – позволяет задавать различные SAT-solver'ы для разных задач
* **init_solver** – SAT-solver для простых задач
* **main_solver** – SAT-solver для основных задач
  - *lingeling* – Lingeling
  - *treengeling* – Treengeling
  - *plingeling* – Plingeling
  - *painless* – Painless
  - *minisat* – Minisat
  - *cryptominisat* – CryptoMinisat
#### Внутренние настройки SAT-solver'ов
  - *workers* – число потоков на один SAT-solver
  - *tl_util* – использование дополнительных средств для прерывания вычислений
  - *tl* – ограничение по времени на решение одной задачи (0 без ограничений)
  - *attempts* – количество попыток при сбоях во время решения
  - *simplify* – упрощать по возможности

### Параметры многопоточности (concurrency)
* **type** – используемый алгоритм для параллельных вычислений
  - *workers* – посредством потоков, которые забирают задачи из предоставленного списка
* **thread_count** – общее число потоков, выделенных программе на одном узле
* **task_queue** – структура для списка задач
  - *generate* – очередь которая генерирует задачи с помощью заданого генератора

### Параметры системы для записи результатов (output)
* **type** – используемая структура записи
  - *storage* – посредством потоков, которые забирают задачи из предоставленного списка
* **log_name** – имя файла для логирования
* **debug_name** – имя файла для отладки
* **src_dump** – список сохраняемых файлов для последующего востановления конфигурации эксперимента

## Пример
Запуск алгоритма для поиска **backdoor** множества для шифра Trivium 64
```
python2.7 main.py trivium_64 -cp trivium_64
```
Необходимая конфигурация будет найдена по тегу, которому сопоставлен путь к соответствующему файлу (./configuration/examples/trivium_64.json)
Также можно указать полный путь
```
python2.7 main.py trivium_64 -cp ./configuration/examples/trivium_64.json
```
Список тегов находится в файле ./configuration/configuration_map.py